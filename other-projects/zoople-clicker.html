<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zoople Cookie Clicker</title>
  <style>
    body { margin: 0; font-family: sans-serif; background: url('/images/backgrounds/starry_night.png') no-repeat center/cover; overflow: hidden; }
    @media (max-width:768px){ body{overflow:auto;} }
    #container{ display:flex; height:100vh; position:relative; }
    .panel{ position:absolute; top:0; bottom:0; width:240px; background:rgba(0,0,0,0.8); color:white; padding:10px; box-sizing:border-box; z-index:10; transform:translateX(-100%); transition:transform .3s; pointer-events:none; }
    .panel.open{ transform:translateX(0); pointer-events:auto; }
    .panel.right{ right:0; left:auto; transform:translateX(100%); }
    .panel.right.open{ transform:translateX(0); }
    .toggle-tab{ position:absolute; top:20px; width:30px; height:40px; background:rgba(0,0,0,0.7); color:white; font-size:18px; display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:11; user-select:none; }
    #toggleLeft{ left:0;} #toggleRight{ right:0; }
    #center{ flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; position:relative; overflow-y:auto; padding-top:20px; }
    .upgrade-item, .trinket-item{ display:flex; align-items:flex-start; margin-bottom:12px; }
    .upgrade-item .count, .trinket-item .count{ width:30px; text-align:left; font-size:1.2em; line-height:1.2; }
    .upgrade-item .info, .trinket-item .info{ flex:1; }
    .upgrade-item .info h3, .trinket-item .info h3{ margin:0; font-size:1em; }
    .upgrade-item .info p, .trinket-item .info p{ margin:4px 0 0; font-size:0.8em; color:#ccc; }
    .upgrade-item button, .trinket-item button{ margin-left:8px; flex-shrink:0; width:60px; height:48px; background:#444; border:none; border-radius:6px; color:white; font-size:1em; cursor:pointer; opacity:0.4; transition:opacity .2s, background .2s; }
    .upgrade-item button.enabled, .trinket-item button.enabled{ background:#4CAF50; opacity:1; }
    .upgrade-panel .header, .trinket-panel .header{ margin-bottom:10px; }
    /* Auto-Buy dropdown */
    .autobuy-select{ width:100%; padding:6px; margin-top:6px; background:#222; color:white; border:none; border-radius:4px; }
  </style>
</head>
<body>
  <div id="toggleLeft" class="toggle-tab">❮</div>
  <div id="toggleRight" class="toggle-tab">❯</div>
  <div id="container">
    <div class="panel" id="upgrades">
      <div class="header"><h2>Upgrades</h2></div>
      <div class="upgrade-item" data-type="zooplication">
        <div class="count" id="count-zooplication">0</div>
        <div class="info">
          <h3>Zooplication</h3>
          <p>Boost click power permanently.</p>
        </div>
        <button id="btn-zooplication"></button>
      </div>
      <div class="upgrade-item" data-type="autoClicker">
        <div class="count" id="count-autoClicker">0</div>
        <div class="info">
          <h3>Auto-Clicker</h3>
          <p>Automate clicks over time.</p>
        </div>
        <button id="btn-autoClicker"></button>
      </div>
      <div class="upgrade-item" data-type="desperation">
        <div class="count" id="count-desperation">0</div>
        <div class="info">
          <h3>Desperation</h3>
          <p>Extra clicks when broke.</p>
        </div>
        <button id="btn-desperation"></button>
      </div>
      <div class="upgrade-item" data-type="crack">
        <div class="count" id="count-crack">0</div>
        <div class="info">
          <h3>Crack</h3>
          <p>Speeds up auto-clickers.</p>
        </div>
        <button id="btn-crack"></button>
      </div>
      <div class="upgrade-item" data-type="autoBuyer">
        <div class="count" id="count-autoBuyer">0</div>
        <div class="info">
          <h3>Auto-Buy</h3>
          <p>Select what to autobuy.</p>
          <select id="select-autoBuyer" class="autobuy-select">
            <option value="off">Off</option>
            <option value="upgrades">All Upgrades</option>
            <option value="trinkets">All Trinkets</option>
            <optgroup label="Individual Upgrades">
              <option value="zooplication">Zooplication</option>
              <option value="autoClicker">Auto-Clicker</option>
              <option value="desperation">Desperation</option>
              <option value="crack">Crack</option>
            </optgroup>
            <optgroup label="Trinkets">
              <option value="blunt">Blunt</option>
            </optgroup>
          </select>
        </div>
        <button id="btn-autoBuyer"></button>
      </div>
    </div>
    <div class="panel right" id="shop">
      <div class="header"><h2>Trinkets</h2></div>
      <div class="trinket-item" data-type="blunt">
        <button id="btn-blunt"></button>
        <div class="info">
          <h3>Blunt</h3>
          <p>Increase base multiplier.</p>
        </div>
        <div class="count" id="count-blunt">0</div>
      </div>
    </div>
    <div id="center">
      <!-- clicker and labels unchanged -->
    </div>
  </div>
  <script>
    // ... existing JS state and functions ...
    // on updateDisplay(), for each type:
    //   set button text = price, add/remove 'enabled' class based on affordability
    //   update count elements
    // handle dropdown change to set autoBuyTarget
    // modify attemptAutoBuy() to respect target selection
  </script>
</body>
</html>
